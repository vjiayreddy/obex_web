{"version":3,"names":["h","Fragment","useEffect","useState","useCallback","nanoid","SearchFilterInput","props","search","searchOnInput","searchTerm","showButton","inputLabel","clearSearchLabel","buttonLabel","clearSearch","inputClassName","buttonCSSClassName","searchText","setSearchText","validateAndSearch","ev","preventDefault","handleInput","inputValue","target","value","handleReset","form","formEl","document","createElement","setAttribute","id","body","appendChild","addEventListener","removeEventListener","removeChild"],"sources":["SearchFilterInput.jsx"],"sourcesContent":["import { h, Fragment } from 'preact'\nimport { useEffect, useState, useCallback } from 'preact/hooks'\nimport { nanoid } from 'nanoid/non-secure'\n// import debounce from 'lodash.debounce'\n\nexport default function SearchFilterInput (props) {\n  const {\n    search,\n    searchOnInput,\n    searchTerm,\n    showButton,\n    inputLabel,\n    clearSearchLabel,\n    buttonLabel,\n    clearSearch,\n    inputClassName,\n    buttonCSSClassName,\n  } = props\n  const [searchText, setSearchText] = useState(searchTerm ?? '')\n  // const debouncedSearch = debounce((q) => search(q), 1000)\n\n  const validateAndSearch = useCallback((ev) => {\n    ev.preventDefault()\n    search(searchText)\n  }, [search, searchText])\n\n  const handleInput = useCallback((ev) => {\n    const inputValue = ev.target.value\n    setSearchText(inputValue)\n    if (searchOnInput) search(inputValue)\n  }, [setSearchText, searchOnInput, search])\n\n  const handleReset = () => {\n    setSearchText('')\n    if (clearSearch) clearSearch()\n  }\n\n  const [form] = useState(() => {\n    const formEl = document.createElement('form')\n    formEl.setAttribute('tabindex', '-1')\n    formEl.id = nanoid()\n    return formEl\n  })\n\n  useEffect(() => {\n    document.body.appendChild(form)\n    form.addEventListener('submit', validateAndSearch)\n    return () => {\n      form.removeEventListener('submit', validateAndSearch)\n      document.body.removeChild(form)\n    }\n  }, [form, validateAndSearch])\n\n  return (\n    <Fragment>\n      <input\n        className={`uppy-u-reset ${inputClassName}`}\n        type=\"search\"\n        aria-label={inputLabel}\n        placeholder={inputLabel}\n        value={searchText}\n        onInput={handleInput}\n        form={form.id}\n        data-uppy-super-focusable\n      />\n      {\n        !showButton && (\n          <svg aria-hidden=\"true\" focusable=\"false\" class=\"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon\" width=\"12\" height=\"12\" viewBox=\"0 0 12 12\">\n            <path d=\"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z\" />\n          </svg>\n        )\n      }\n      {\n        !showButton && searchText && (\n          <button\n            className=\"uppy-u-reset uppy-ProviderBrowser-searchFilterReset\"\n            type=\"button\"\n            aria-label={clearSearchLabel}\n            title={clearSearchLabel}\n            onClick={handleReset}\n          >\n            <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" viewBox=\"0 0 19 19\">\n              <path d=\"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z\" />\n            </svg>\n          </button>\n        )\n      }\n      {\n        showButton && (\n          <button\n            className={`uppy-u-reset uppy-c-btn uppy-c-btn-primary ${buttonCSSClassName}`}\n            type=\"submit\"\n            form={form.id}\n          >\n            {buttonLabel}\n          </button>\n        )\n      }\n    </Fragment>\n  )\n}\n"],"mappings":"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"}
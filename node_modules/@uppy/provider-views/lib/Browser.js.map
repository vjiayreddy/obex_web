{"version":3,"names":["h","classNames","remoteFileObjToLocal","SearchFilterInput","FooterActions","Item","VIRTUAL_SHARED_DIR","Browser","props","currentSelection","folders","files","uppyFiles","viewType","headerComponent","showBreadcrumbs","isChecked","toggleCheckbox","recordShiftKeyPress","handleScroll","showTitles","i18n","validateRestrictions","isLoading","showSearchFilter","search","searchTerm","clearSearch","searchOnInput","searchInputLabel","clearSearchLabel","getNextFolder","cancel","done","columns","noResultsLabel","selected","length","map","folder","id","title","name","getItemIcon","icon","event","type","isDisabled","loading","isCheckboxDisabled","handleFolderClick","file","restrictionError","author"],"sources":["Browser.jsx"],"sourcesContent":["import { h } from 'preact'\n\nimport classNames from 'classnames'\nimport remoteFileObjToLocal from '@uppy/utils/lib/remoteFileObjToLocal'\nimport SearchFilterInput from './SearchFilterInput.jsx'\nimport FooterActions from './FooterActions.jsx'\nimport Item from './Item/index.jsx'\n\nconst VIRTUAL_SHARED_DIR = 'shared-with-me'\n\nfunction Browser (props) {\n  const {\n    currentSelection,\n    folders,\n    files,\n    uppyFiles,\n    viewType,\n    headerComponent,\n    showBreadcrumbs,\n    isChecked,\n    toggleCheckbox,\n    recordShiftKeyPress,\n    handleScroll,\n    showTitles,\n    i18n,\n    validateRestrictions,\n    isLoading,\n    showSearchFilter,\n    search,\n    searchTerm,\n    clearSearch,\n    searchOnInput,\n    searchInputLabel,\n    clearSearchLabel,\n    getNextFolder,\n    cancel,\n    done,\n    columns,\n    noResultsLabel,\n  } = props\n\n  const selected = currentSelection.length\n\n  return (\n    <div\n      className={classNames(\n        'uppy-ProviderBrowser',\n        `uppy-ProviderBrowser-viewType--${viewType}`,\n      )}\n    >\n      {headerComponent && (\n        <div className=\"uppy-ProviderBrowser-header\">\n          <div\n            className={classNames(\n              'uppy-ProviderBrowser-headerBar',\n              !showBreadcrumbs && 'uppy-ProviderBrowser-headerBar--simple',\n            )}\n          >\n            {headerComponent}\n          </div>\n        </div>\n      )}\n\n      {showSearchFilter && (\n        <div class=\"uppy-ProviderBrowser-searchFilter\">\n          <SearchFilterInput\n            search={search}\n            searchTerm={searchTerm}\n            clearSearch={clearSearch}\n            inputLabel={searchInputLabel}\n            clearSearchLabel={clearSearchLabel}\n            inputClassName=\"uppy-ProviderBrowser-searchFilterInput\"\n            searchOnInput={searchOnInput}\n          />\n        </div>\n      )}\n\n      {(() => {\n        if (isLoading) {\n          return (\n            <div className=\"uppy-Provider-loading\">\n              <span>{i18n('loading')}</span>\n            </div>\n          )\n        }\n\n        if (!folders.length && !files.length) {\n          return (\n            <div className=\"uppy-Provider-empty\">\n              {noResultsLabel}\n            </div>\n          )\n        }\n\n        return (\n          <div className=\"uppy-ProviderBrowser-body\">\n            <ul\n              className=\"uppy-ProviderBrowser-list\"\n              onScroll={handleScroll}\n              role=\"listbox\"\n              // making <ul> not focusable for firefox\n              tabIndex=\"-1\"\n            >\n              {folders.map((folder) => {\n                return Item({\n                  columns,\n                  showTitles,\n                  viewType,\n                  i18n,\n                  id: folder.id,\n                  title: folder.name,\n                  getItemIcon: () => folder.icon,\n                  isChecked: isChecked(folder),\n                  toggleCheckbox: (event) => toggleCheckbox(event, folder),\n                  recordShiftKeyPress,\n                  type: 'folder',\n                  isDisabled: isChecked(folder)?.loading,\n                  isCheckboxDisabled: folder.id === VIRTUAL_SHARED_DIR,\n                  handleFolderClick: () => getNextFolder(folder),\n                })\n              })}\n\n              {files.map((file) => {\n                const restrictionError = validateRestrictions(\n                  remoteFileObjToLocal(file),\n                  [...uppyFiles, ...currentSelection],\n                )\n\n                return Item({\n                  id: file.id,\n                  title: file.name,\n                  author: file.author,\n                  getItemIcon: () => file.icon,\n                  isChecked: isChecked(file),\n                  toggleCheckbox: (event) => toggleCheckbox(event, file),\n                  recordShiftKeyPress,\n                  columns,\n                  showTitles,\n                  viewType,\n                  i18n,\n                  type: 'file',\n                  isDisabled: restrictionError && !isChecked(file),\n                  restrictionError,\n                })\n              })}\n            </ul>\n          </div>\n        )\n      })()}\n\n      {selected > 0 && (\n        <FooterActions\n          selected={selected}\n          done={done}\n          cancel={cancel}\n          i18n={i18n}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default Browser\n"],"mappings":"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"}
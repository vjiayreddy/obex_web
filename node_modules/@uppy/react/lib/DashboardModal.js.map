{"version":3,"names":["createElement","h","Component","PropTypes","DashboardPlugin","cssSize","locale","metaFields","plugins","uppy","uppyPropType","getHTMLProps","nonHtmlPropsHaveChanged","DashboardModal","componentDidMount","installPlugin","componentDidUpdate","prevProps","open","onRequestClose","props","uninstallPlugin","options","onRequestCloseModal","plugin","setOptions","closeModal","openModal","componentWillUnmount","target","closeModalOnClickOutside","disablePageScrollWhenModalOpen","inline","width","height","showProgressDetails","note","proudlyDisplayPoweredByUppy","autoOpenFileEditor","animateOpenClose","browserBackButtonClose","closeAfterFinish","disableStatusBar","disableInformer","disableThumbnailGenerator","disableLocalFiles","disabled","hideCancelButton","hidePauseResumeButton","hideProgressAfterFinish","hideRetryButton","hideUploadButton","showLinkToFileUploadResult","showRemoveButtonAfterComplete","showSelectedFiles","waitForThumbnailsBeforeUpload","fileManagerSelectionType","theme","thumbnailType","thumbnailWidth","id","container","use","getPlugin","removePlugin","render","className","ref","propTypes","isRequired","window","instanceOf","HTMLElement","any","bool","func","string","number","defaultProps","undefined"],"sources":["DashboardModal.js"],"sourcesContent":["import { createElement as h, Component } from 'react'\nimport PropTypes from 'prop-types'\nimport DashboardPlugin from '@uppy/dashboard'\nimport { cssSize, locale, metaFields, plugins, uppy as uppyPropType } from './propTypes.js'\nimport getHTMLProps from './getHTMLProps.js'\nimport nonHtmlPropsHaveChanged from './nonHtmlPropsHaveChanged.js'\n\n/**\n * React Component that renders a Dashboard for an Uppy instance in a Modal\n * dialog. Visibility of the Modal is toggled using the `open` prop.\n */\n\nclass DashboardModal extends Component {\n  componentDidMount () {\n    this.installPlugin()\n  }\n\n  componentDidUpdate (prevProps) {\n    const { uppy, open, onRequestClose } = this.props\n    if (prevProps.uppy !== uppy) {\n      this.uninstallPlugin(prevProps)\n      this.installPlugin()\n    } else if (nonHtmlPropsHaveChanged(this.props, prevProps)) {\n      const options = { ...this.props, onRequestCloseModal: onRequestClose }\n      delete options.uppy\n      this.plugin.setOptions(options)\n    }\n    if (prevProps.open && !open) {\n      this.plugin.closeModal()\n    } else if (!prevProps.open && open) {\n      this.plugin.openModal()\n    }\n  }\n\n  componentWillUnmount () {\n    this.uninstallPlugin()\n  }\n\n  installPlugin () {\n    const {\n      uppy,\n      target,\n      open,\n      onRequestClose,\n      closeModalOnClickOutside,\n      disablePageScrollWhenModalOpen,\n      inline,\n      plugins, // eslint-disable-line no-shadow\n      width,\n      height,\n      showProgressDetails,\n      note,\n      metaFields, // eslint-disable-line no-shadow\n      proudlyDisplayPoweredByUppy,\n      autoOpenFileEditor,\n      animateOpenClose,\n      browserBackButtonClose,\n      closeAfterFinish,\n      disableStatusBar,\n      disableInformer,\n      disableThumbnailGenerator,\n      disableLocalFiles,\n      disabled,\n      hideCancelButton,\n      hidePauseResumeButton,\n      hideProgressAfterFinish,\n      hideRetryButton,\n      hideUploadButton,\n      showLinkToFileUploadResult,\n      showRemoveButtonAfterComplete,\n      showSelectedFiles,\n      waitForThumbnailsBeforeUpload,\n      fileManagerSelectionType,\n      theme,\n      thumbnailType,\n      thumbnailWidth,\n      locale, // eslint-disable-line no-shadow\n    } = this.props\n    const options = {\n      id: 'react:DashboardModal',\n      target,\n      closeModalOnClickOutside,\n      disablePageScrollWhenModalOpen,\n      inline,\n      plugins,\n      width,\n      height,\n      showProgressDetails,\n      note,\n      metaFields,\n      proudlyDisplayPoweredByUppy,\n      autoOpenFileEditor,\n      animateOpenClose,\n      browserBackButtonClose,\n      closeAfterFinish,\n      disableStatusBar,\n      disableInformer,\n      disableThumbnailGenerator,\n      disableLocalFiles,\n      disabled,\n      hideCancelButton,\n      hidePauseResumeButton,\n      hideProgressAfterFinish,\n      hideRetryButton,\n      hideUploadButton,\n      showLinkToFileUploadResult,\n      showRemoveButtonAfterComplete,\n      showSelectedFiles,\n      waitForThumbnailsBeforeUpload,\n      fileManagerSelectionType,\n      theme,\n      thumbnailType,\n      thumbnailWidth,\n      locale,\n      onRequestCloseModal: onRequestClose,\n    }\n\n    if (!options.target) {\n      options.target = this.container\n    }\n\n    delete options.uppy\n    uppy.use(DashboardPlugin, options)\n\n    this.plugin = uppy.getPlugin(options.id)\n    if (open) {\n      this.plugin.openModal()\n    }\n  }\n\n  uninstallPlugin (props = this.props) {\n    const { uppy } = props\n\n    uppy.removePlugin(this.plugin)\n  }\n\n  render () {\n    return h('div', {\n      className: 'uppy-Container',\n      ref: (container) => {\n        this.container = container\n      },\n      ...getHTMLProps(this.props),\n    })\n  }\n}\n\nDashboardModal.propTypes = {\n  uppy: uppyPropType.isRequired,\n  target: typeof window !== 'undefined' ? PropTypes.instanceOf(window.HTMLElement) : PropTypes.any,\n  open: PropTypes.bool,\n  onRequestClose: PropTypes.func,\n  closeModalOnClickOutside: PropTypes.bool,\n  disablePageScrollWhenModalOpen: PropTypes.bool,\n  inline: PropTypes.bool,\n  plugins,\n  width: cssSize,\n  height: cssSize,\n  showProgressDetails: PropTypes.bool,\n  note: PropTypes.string,\n  metaFields,\n  proudlyDisplayPoweredByUppy: PropTypes.bool,\n  autoOpenFileEditor: PropTypes.bool,\n  animateOpenClose: PropTypes.bool,\n  browserBackButtonClose: PropTypes.bool,\n  closeAfterFinish: PropTypes.bool,\n  disableStatusBar: PropTypes.bool,\n  disableInformer: PropTypes.bool,\n  disableThumbnailGenerator: PropTypes.bool,\n  disableLocalFiles: PropTypes.bool,\n  disabled: PropTypes.bool,\n  hideCancelButton: PropTypes.bool,\n  hidePauseResumeButton: PropTypes.bool,\n  hideProgressAfterFinish: PropTypes.bool,\n  hideRetryButton: PropTypes.bool,\n  hideUploadButton: PropTypes.bool,\n  showLinkToFileUploadResult: PropTypes.bool,\n  showRemoveButtonAfterComplete: PropTypes.bool,\n  showSelectedFiles: PropTypes.bool,\n  waitForThumbnailsBeforeUpload: PropTypes.bool,\n  fileManagerSelectionType: PropTypes.string,\n  theme: PropTypes.string,\n  // pass-through to ThumbnailGenerator\n  thumbnailType: PropTypes.string,\n  thumbnailWidth: PropTypes.number,\n  locale,\n}\n// Must be kept in sync with @uppy/dashboard/src/Dashboard.jsx.\nDashboardModal.defaultProps = {\n  metaFields: [],\n  plugins: [],\n  inline: false,\n  width: 750,\n  height: 550,\n  thumbnailWidth: 280,\n  thumbnailType: 'image/jpeg',\n  waitForThumbnailsBeforeUpload: false,\n  showLinkToFileUploadResult: false,\n  showProgressDetails: false,\n  hideUploadButton: false,\n  hideCancelButton: false,\n  hideRetryButton: false,\n  hidePauseResumeButton: false,\n  hideProgressAfterFinish: false,\n  note: null,\n  closeModalOnClickOutside: false,\n  closeAfterFinish: false,\n  disableStatusBar: false,\n  disableInformer: false,\n  disableThumbnailGenerator: false,\n  disablePageScrollWhenModalOpen: true,\n  animateOpenClose: true,\n  fileManagerSelectionType: 'files',\n  proudlyDisplayPoweredByUppy: true,\n  showSelectedFiles: true,\n  showRemoveButtonAfterComplete: false,\n  browserBackButtonClose: false,\n  theme: 'light',\n  autoOpenFileEditor: false,\n  disabled: false,\n  disableLocalFiles: false,\n\n  // extra\n  open: undefined,\n  target: undefined,\n  locale: null,\n  onRequestClose: undefined,\n}\n\nexport default DashboardModal\n"],"mappings":"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"}
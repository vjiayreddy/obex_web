{"version":3,"names":["useEffect","useRef","Uppy","UppyCore","useUppy","factory","TypeError","uppy","undefined","current","close","reason"],"sources":["useUppy.js"],"sourcesContent":["import { useEffect, useRef } from 'react'\nimport { Uppy as UppyCore } from '@uppy/core'\n\n/**\n * @deprecated Initialize Uppy outside of the component.\n */\nexport default function useUppy (factory) {\n  if (typeof factory !== 'function') {\n    throw new TypeError('useUppy: expected a function that returns a new Uppy instance')\n  }\n\n  const uppy = useRef(undefined)\n  if (uppy.current === undefined) {\n    uppy.current = factory()\n\n    if (!(uppy.current instanceof UppyCore)) {\n      throw new TypeError(`useUppy: factory function must return an Uppy instance, got ${typeof uppy.current}`)\n    }\n  }\n\n  useEffect(() => {\n    return () => {\n      uppy.current?.close({ reason: 'unmount' })\n      uppy.current = undefined\n    }\n  }, [uppy])\n\n  return uppy.current\n}\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,MAApB,QAAkC,OAAlC;AACA,SAASC,IAAI,IAAIC,QAAjB,QAAiC,YAAjC;AAEA;AACA;AACA;;AACA,eAAe,SAASC,OAAT,CAAkBC,OAAlB,EAA2B;EACxC,IAAI,OAAOA,OAAP,KAAmB,UAAvB,EAAmC;IACjC,MAAM,IAAIC,SAAJ,CAAc,+DAAd,CAAN;EACD;;EAED,MAAMC,IAAI,GAAGN,MAAM,CAACO,SAAD,CAAnB;;EACA,IAAID,IAAI,CAACE,OAAL,KAAiBD,SAArB,EAAgC;IAC9BD,IAAI,CAACE,OAAL,GAAeJ,OAAO,EAAtB;;IAEA,IAAI,EAAEE,IAAI,CAACE,OAAL,YAAwBN,QAA1B,CAAJ,EAAyC;MACvC,MAAM,IAAIG,SAAJ,CAAe,+DAA8D,OAAOC,IAAI,CAACE,OAAQ,EAAjG,CAAN;IACD;EACF;;EAEDT,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MAAA;;MACX,iBAAAO,IAAI,CAACE,OAAL,mCAAcC,KAAd,CAAoB;QAAEC,MAAM,EAAE;MAAV,CAApB;MACAJ,IAAI,CAACE,OAAL,GAAeD,SAAf;IACD,CAHD;EAID,CALQ,EAKN,CAACD,IAAD,CALM,CAAT;EAOA,OAAOA,IAAI,CAACE,OAAZ;AACD"}
{"version":3,"names":["createElement","h","Component","PropTypes","ProgressBarPlugin","uppy","uppyPropType","getHTMLProps","nonHtmlPropsHaveChanged","ProgressBar","componentDidMount","installPlugin","componentDidUpdate","prevProps","props","uninstallPlugin","options","target","container","plugin","setOptions","componentWillUnmount","fixed","hideAfterFinish","id","use","getPlugin","removePlugin","render","className","ref","propTypes","isRequired","bool","defaultProps"],"sources":["ProgressBar.js"],"sourcesContent":["import { createElement as h, Component } from 'react'\nimport PropTypes from 'prop-types'\nimport ProgressBarPlugin from '@uppy/progress-bar'\nimport { uppy as uppyPropType } from './propTypes.js'\nimport getHTMLProps from './getHTMLProps.js'\nimport nonHtmlPropsHaveChanged from './nonHtmlPropsHaveChanged.js'\n\n/**\n * React component that renders a progress bar at the top of the page.\n */\n\nclass ProgressBar extends Component {\n  componentDidMount () {\n    this.installPlugin()\n  }\n\n  componentDidUpdate (prevProps) {\n    // eslint-disable-next-line react/destructuring-assignment\n    if (prevProps.uppy !== this.props.uppy) {\n      this.uninstallPlugin(prevProps)\n      this.installPlugin()\n    } else if (nonHtmlPropsHaveChanged(this.props, prevProps)) {\n      const options = { ...this.props, target: this.container }\n      delete options.uppy\n      this.plugin.setOptions(options)\n    }\n  }\n\n  componentWillUnmount () {\n    this.uninstallPlugin()\n  }\n\n  installPlugin () {\n    const { uppy, fixed, hideAfterFinish } = this.props\n    const options = {\n      id: 'react:ProgressBar',\n      fixed,\n      hideAfterFinish,\n      target: this.container,\n    }\n    delete options.uppy\n\n    uppy.use(ProgressBarPlugin, options)\n\n    this.plugin = uppy.getPlugin(options.id)\n  }\n\n  uninstallPlugin (props = this.props) {\n    const { uppy } = props\n\n    uppy.removePlugin(this.plugin)\n  }\n\n  render () {\n    return h('div', {\n      className: 'uppy-Container',\n      ref: (container) => {\n        this.container = container\n      },\n      ...getHTMLProps(this.props),\n    })\n  }\n}\n\nProgressBar.propTypes = {\n  uppy: uppyPropType.isRequired,\n  fixed: PropTypes.bool,\n  hideAfterFinish: PropTypes.bool,\n}\n// Must be kept in sync with @uppy/progress-bar/src/ProgressBar.jsx\nProgressBar.defaultProps = {\n  fixed: false,\n  hideAfterFinish: true,\n}\n\nexport default ProgressBar\n"],"mappings":"AAAA,SAASA,aAAa,IAAIC,CAA1B,EAA6BC,SAA7B,QAA8C,OAA9C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,iBAAP,MAA8B,oBAA9B;AACA,SAASC,IAAI,IAAIC,YAAjB,QAAqC,gBAArC;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,uBAAP,MAAoC,8BAApC;AAEA;AACA;AACA;;AAEA,MAAMC,WAAN,SAA0BP,SAA1B,CAAoC;EAClCQ,iBAAiB,GAAI;IACnB,KAAKC,aAAL;EACD;;EAEDC,kBAAkB,CAAEC,SAAF,EAAa;IAC7B;IACA,IAAIA,SAAS,CAACR,IAAV,KAAmB,KAAKS,KAAL,CAAWT,IAAlC,EAAwC;MACtC,KAAKU,eAAL,CAAqBF,SAArB;MACA,KAAKF,aAAL;IACD,CAHD,MAGO,IAAIH,uBAAuB,CAAC,KAAKM,KAAN,EAAaD,SAAb,CAA3B,EAAoD;MACzD,MAAMG,OAAO,GAAG,EAAE,GAAG,KAAKF,KAAV;QAAiBG,MAAM,EAAE,KAAKC;MAA9B,CAAhB;MACA,OAAOF,OAAO,CAACX,IAAf;MACA,KAAKc,MAAL,CAAYC,UAAZ,CAAuBJ,OAAvB;IACD;EACF;;EAEDK,oBAAoB,GAAI;IACtB,KAAKN,eAAL;EACD;;EAEDJ,aAAa,GAAI;IACf,MAAM;MAAEN,IAAF;MAAQiB,KAAR;MAAeC;IAAf,IAAmC,KAAKT,KAA9C;IACA,MAAME,OAAO,GAAG;MACdQ,EAAE,EAAE,mBADU;MAEdF,KAFc;MAGdC,eAHc;MAIdN,MAAM,EAAE,KAAKC;IAJC,CAAhB;IAMA,OAAOF,OAAO,CAACX,IAAf;IAEAA,IAAI,CAACoB,GAAL,CAASrB,iBAAT,EAA4BY,OAA5B;IAEA,KAAKG,MAAL,GAAcd,IAAI,CAACqB,SAAL,CAAeV,OAAO,CAACQ,EAAvB,CAAd;EACD;;EAEDT,eAAe,CAAED,KAAF,EAAsB;IAAA,IAApBA,KAAoB;MAApBA,KAAoB,GAAZ,KAAKA,KAAO;IAAA;;IACnC,MAAM;MAAET;IAAF,IAAWS,KAAjB;IAEAT,IAAI,CAACsB,YAAL,CAAkB,KAAKR,MAAvB;EACD;;EAEDS,MAAM,GAAI;IACR,OAAO3B,CAAC,CAAC,KAAD,EAAQ;MACd4B,SAAS,EAAE,gBADG;MAEdC,GAAG,EAAGZ,SAAD,IAAe;QAClB,KAAKA,SAAL,GAAiBA,SAAjB;MACD,CAJa;MAKd,GAAGX,YAAY,CAAC,KAAKO,KAAN;IALD,CAAR,CAAR;EAOD;;AAlDiC;;AAqDpCL,WAAW,CAACsB,SAAZ,GAAwB;EACtB1B,IAAI,EAAEC,YAAY,CAAC0B,UADG;EAEtBV,KAAK,EAAEnB,SAAS,CAAC8B,IAFK;EAGtBV,eAAe,EAAEpB,SAAS,CAAC8B;AAHL,CAAxB,C,CAKA;;AACAxB,WAAW,CAACyB,YAAZ,GAA2B;EACzBZ,KAAK,EAAE,KADkB;EAEzBC,eAAe,EAAE;AAFQ,CAA3B;AAKA,eAAed,WAAf"}